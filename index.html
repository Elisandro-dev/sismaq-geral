<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SISMAQ - Solicita√ß√£o de Manuten√ß√£o</title>
  <link rel="stylesheet" href="style.css">

  <style>
    /* ====== Base e tipografia ====== */
    html, body { margin:0; padding:0; }
    body { color:#003366; font-family:Arial, sans-serif; background:#f4f4f4; }

    /* ====== Cabe√ßalho responsivo ====== */
    .header{
      display:flex;
      align-items:center;
      justify-content:center;          /* centraliza o bloco de t√≠tulos */
      gap: clamp(8px, 2vw, 16px);
      padding: clamp(12px, 3vw, 24px) 0;
      background: transparent;         /* usa o fundo da p√°gina */
    }
    .logo{
      height: clamp(56px, 10vw, 100px);
      flex: 0 0 auto;
    }
    .titles{ text-align:center; }
    .brand{
      display:block;
      font-weight:bold;
      font-size: clamp(24px, 6vw, 36px);
      margin-bottom:4px;
    }
    .subtitle{
      font-size: clamp(14px, 3.5vw, 18px);
      color:#003366;
    }
    /* ‚ÄúSpacer‚Äù imita a largura da logo para o centro ficar perfeito */
    .spacer{
      width: clamp(56px, 10vw, 100px);
      height:1px;
      flex:0 0 auto;
    }

    /* ====== Card do formul√°rio ====== */
    .container{
      width: min(92vw, 640px);           /* fluido, com limite no desktop */
      margin: clamp(16px, 4vw, 32px) auto;
      padding: clamp(12px, 3vw, 24px);
      background:#fff;
      border-radius:10px;
      box-shadow:0 0 10px rgba(0,0,0,0.1);
    }

    label{
      display:block;
      margin-top: clamp(8px, 2vw, 12px);
      font-weight:bold;
      font-size: clamp(14px, 2.8vw, 16px);
    }
    input, select, textarea{
      margin-top:5px;
      width:100%;
      padding: clamp(8px, 2.5vw, 12px);
      font-size: clamp(14px, 2.8vw, 16px);
      border:1px solid #ccc;
      border-radius:4px;
      box-sizing:border-box;
    }
    button{
      width:100%;
      padding: clamp(10px, 3vw, 14px);
      margin-top: clamp(12px, 3vw, 16px);
      font-size: clamp(14px, 2.8vw, 16px);
      background:#003366; color:#fff;
      border:none; border-radius:4px; cursor:pointer;
    }
    button:hover{ background:#0055aa; }

    /* ====== Anexos ====== */
    .anexo-btn{
      background:none; border:none; cursor:pointer;
      font-size: clamp(16px, 3.5vw, 18px);
      color:#003366; padding:8px 14px; border-radius:6px;
    }
    .anexo-btn:hover{ color:#0055aa; background:#eef4ff; }
    .visually-hidden-file{
      position:absolute; left:-9999px; width:1px; height:1px; opacity:0; overflow:hidden;
    }
    #preview{
      display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:10px;
    }
    #preview img{
      width: clamp(72px, 18vw, 100px);
      height: clamp(72px, 18vw, 100px);
      object-fit: cover; border:1px solid #ccc; border-radius:6px;
    }

    /* ====== Rodap√© ====== */
    footer{
      text-align:center;
      font-size: clamp(12px, 2.8vw, 14px);
      margin: 24px 0 32px;
      padding: 0 12px;
    }

    /* ====== Ajuste extra para telas muito estreitas ====== */
    @media (max-width: 420px){
      .header{ flex-direction:column; align-items:flex-start; padding-left: clamp(12px, 4vw, 24px); }
      .spacer{ display:none; }
      .titles{ width:100%; text-align:center; }
    }
  </style>
</head>
<body>

  <!-- ====== Cabe√ßalho (logo √† esquerda, t√≠tulos centralizados) ====== -->
  <header class="header">
    <img src="logo.png" alt="Logo" class="logo">
    <div class="titles">
      <span class="brand">SISMAQ</span>
      <span class="subtitle">SISTEMA DE MANUTEN√á√ÉO</span>
    </div>
    <div class="spacer"></div>
  </header>

  <!-- ====== Card do formul√°rio ====== -->
  <div class="container">
    <form id="formManutencao" onsubmit="enviarEmail(); return false;">
      <label>Solicitante:</label>
      <input type="text" id="solicitante" placeholder="Nome do solicitante" required>

      <label>E-mail do Solicitante:</label>
      <input type="email" id="email_solicitante" placeholder="Ex: nome@empresa.com" required>

      <label>Cliente:</label>
      <input type="text" id="Cliente" placeholder="Cliente X" required>

      <label>M√°quina:</label>
      <input type="text" id="M√°quina" placeholder="Paletizadora de Caixas / PLX - 480" required>

      <label>Data de Instala√ß√£o:</label>
      <input type="date" value="2025-05-25" required>

      <label>Tipo de Manuten√ß√£o:</label>
      <select id="tipo">
        <option value="corretiva">Corretiva</option>
        <option value="preventiva">Preventiva</option>
      </select>

      <label>Urg√™ncia:</label>
      <select id="urgencia">
        <option value="baixa">Baixa</option>
        <option value="media">M√©dia</option>
        <option value="alta">Alta</option>
      </select>

      <label>Data desejada para atendimento:</label>
      <input type="date" id="data_atendimento" required>

      <label>Descri√ß√£o do Problema:</label>
      <textarea id="descricao" rows="4" placeholder="Ex: Cilindro da Garra..."></textarea>

      <!-- üìé Anexar imagens (at√© 3) -->
      <div style="text-align:center; margin-top:10px;">
        <input type="file" id="imagens" accept="image/*" multiple class="visually-hidden-file">
        <label for="imagens" class="anexo-btn" title="Anexar at√© 3 imagens">üìé Anexar imagens (at√© 3)</label>
        <div style="font-size:12px; color:#666; margin-top:6px;">JPG/PNG/HEIC ‚Ä¢ M√°x.: 3 arquivos</div>
        <div id="preview"></div>
      </div>

      <button type="submit">Enviar Solicita√ß√£o</button>
    </form>
  </div>

  <footer>
    <p><strong>Coordenador de Service:</strong> Elisandro Varela</p>
    <p><strong>Email:</strong> <a href="mailto:elisandrovarela18@gmail.com">elisandrovarela18@gmail.com</a></p>
    <p><strong>Telefone Fixo:</strong> +55 (11) 2101-0123 Ramal 789</p>
    <p><strong>WhatsApp:</strong> +55 11 9 9102-0304</p>
  </footer>

  <script>
    // Limita a 3 imagens e gera pr√©-visualiza√ß√£o
    document.addEventListener('DOMContentLoaded', function () {
      const inputImagens = document.getElementById('imagens');
      const preview = document.getElementById('preview');

      inputImagens.addEventListener('change', () => {
        let files = Array.from(inputImagens.files);

        // Limite de 3
        if (files.length > 3) {
          alert('Voc√™ pode anexar no m√°ximo 3 imagens.');
          files = files.slice(0, 3);
          const dt = new DataTransfer();
          files.forEach(f => dt.items.add(f));
          inputImagens.files = dt.files;
        }

        // Pr√©-visualiza√ß√£o
        preview.innerHTML = '';
        files.forEach(file => {
          if (!file.type.startsWith('image/')) return;
          const reader = new FileReader();
          reader.onload = e => {
            const img = document.createElement('img');
            img.src = e.target.result;
            img.alt = file.name;
            preview.appendChild(img);
          };
          reader.readAsDataURL(file);
        });
      });
    });

    // Envia via mailto (N√ÉO anexa arquivos; lista os nomes no corpo)
    function enviarEmail() {
      const solicitante = document.getElementById("solicitante").value;
      const email = document.getElementById("email_solicitante").value;
      const cliente = document.getElementById("Cliente").value || '‚Äî';
      const maquina = document.getElementById("M√°quina").value || '‚Äî';
      const tipo = document.getElementById("tipo").value;
      const urgencia = document.getElementById("urgencia").value;
      const dataAtendimento = document.getElementById("data_atendimento").value;
      const descricao = document.getElementById("descricao").value;

      const nomesImagens = Array.from(document.getElementById('imagens').files)
        .map(f => f.name).join(', ') || 'Nenhuma';

      const assunto = encodeURIComponent("Solicita√ß√£o de Manuten√ß√£o - SISMAQ");
      const corpo = encodeURIComponent(
        "Solicitante: " + solicitante + "\n" +
        "E-mail: " + email + "\n" +
        "Cliente: " + cliente + "\n" +
        "M√°quina: " + maquina + "\n" +
        "Tipo de Manuten√ß√£o: " + tipo + "\n" +
        "Urg√™ncia: " + urgencia + "\n" +
        "Data desejada: " + dataAtendimento + "\n" +
        "Descri√ß√£o: " + descricao + "\n\n" +
        "Imagens selecionadas (nomes): " + nomesImagens + "\n" +
        "Observa√ß√£o: o navegador n√£o envia anexos via mailto; anexar manualmente."
      );

      window.location.href = "mailto:elisandrovarela18@gmail.com"
        + "?subject=" + assunto
        + "&body=" + corpo
        + "&cc=" + encodeURIComponent(email);
    }
  </script>
</body>
</html>
